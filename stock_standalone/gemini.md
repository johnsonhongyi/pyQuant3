# å…¨èƒ½äº¤æ˜“ç»ˆç«¯å¼€å‘è·Ÿè¸ª

> åˆ›å»ºæ—¶é—´ï¼š2026-01-20 18:24  
> æœ€åæ›´æ–°ï¼š2026-01-21 01:05  
> **æ ¸å¿ƒç›®æ ‡**ï¼šä¿¡å·æ•æ‰ â†’ çƒ­ç‚¹è·Ÿè¸ª â†’ è“„åŠ¿è·Ÿå• â†’ è‡ªåŠ¨äº¤æ˜“

---

## âš¡ å¿«é€Ÿæ¢å¤æŒ‡å—

**æ¯æ¬¡æ–°å¯¹è¯åªéœ€å‘é€**: `@gemini.md ç»§ç»­`

æˆ‘ä¼šè‡ªåŠ¨ï¼š
1. è¯»å–æ­¤æ–‡æ¡£ï¼Œæ¢å¤å®Œæ•´ä¸Šä¸‹æ–‡
2. æ‰¾åˆ° `ğŸ”´ å½“å‰ä»»åŠ¡` åŒºå—ï¼Œç»§ç»­å®æ–½
3. å®Œæˆåæ›´æ–°è¿›åº¦å’Œå˜æ›´æ—¥å¿—

**å¸¸ç”¨æŒ‡ä»¤**:
| æŒ‡ä»¤ | è¯´æ˜ |
|------|------|
| `@gemini.md ç»§ç»­` | ç»§ç»­å½“å‰ä»»åŠ¡ |
| `@gemini.md ç»§ç»­ P0.5` | è·³è½¬åˆ° P0.5 ä»»åŠ¡ |
| `@gemini.md çŠ¶æ€` | æŸ¥çœ‹è¿›åº¦ |
| `@gemini.md å›é¡¾` | æ€»ç»“å·²å®Œæˆå·¥ä½œ |

---

## âœ… æœ€è¿‘å®Œæˆä»»åŠ¡: çƒ­ç‚¹é¢æ¿ä¿¡å·ç›‘æµ‹é›†æˆ (01-21 01:20)

**çŠ¶æ€**: âœ… å·²å®Œæˆ  
**ç›®æ ‡**: ä¸ºçƒ­ç‚¹åˆ—è¡¨è‚¡ç¥¨æä¾›å®æ—¶å½¢æ€æ£€æµ‹å’Œè·Ÿå•æ—¥å¿—

### å˜æ›´æ–‡ä»¶

| æ–‡ä»¶ | å˜æ›´ |
|------|------|
| `signal_log_panel.py` | **æ–°å»º** - å®æ—¶ä¿¡å·æ—¥å¿—æµ®åŠ¨é¢æ¿ |
| `hotlist_panel.py` | æ–°å¢ `check_patterns`/`_on_signal_detected` æ–¹æ³• |
| `trade_visualizer_qt6.py` | æ–°å¢çƒ­ç‚¹é¢æ¿åˆå§‹åŒ–å’Œå®šæ—¶æ£€æµ‹é€»è¾‘ |

### å¿«æ·é”® (ç³»ç»Ÿå…¨å±€æ¨¡å¼)

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| **Alt+H** | æ˜¾ç¤º/éšè—çƒ­ç‚¹è‡ªé€‰é¢æ¿ (Global) |
| **Alt+L** | æ˜¾ç¤º/éšè—ä¿¡å·æ—¥å¿—é¢æ¿ (Global) |
| **H** | æ·»åŠ å½“å‰è‚¡ç¥¨åˆ°çƒ­ç‚¹è‡ªé€‰ |

---

## ğŸ›°ï¸ å¯è§†åŒ–è¿­ä»£ä¸ä¿¡å·æµç›‘æ§ (01-21 01:26)

- **å…¨å±€æ‹¦æˆª**: ä½¿ç”¨ `keyboard` åº“å¤„ç†ç³»ç»Ÿçº§çƒ­é”®ï¼Œå¹¶ä¸ `QShortcut` å®ç°è‡ªåŠ¨äº’æ–¥ï¼ˆå¼€å¯ç³»ç»Ÿæ¨¡å¼æ—¶ç¦ç”¨çª—å£æ¨¡å¼å¿«æ·é”®ï¼‰ï¼Œå½»åº•è§£å†³ `Alt+H/L` ç­‰æŒ‰é”®çš„â€œåŒé‡è§¦å‘â€åŠå†²çªé—®é¢˜ã€‚
- **æ¶æ„ä¼˜åŒ–**: å°†æ‰€æœ‰å…¨å±€çƒ­é”®ç»Ÿä¸€é›†æˆåˆ° `_register_system_hotkeys` æ³¨å†Œä¸­å¿ƒï¼ŒåºŸå¼ƒåˆ†æ•£åœ¨ `QAction` ä¸­çš„ä¸´æ—¶å¿«æ·é”®è®¾ç½®ã€‚
- **æŒä¹…åŒ–**: å®ç°äº† `SignalLogPanel` çš„çª—å£ä½ç½®ä¸å°ºå¯¸æŒä¹…åŒ–åŠ è½½æ–¹æ¡ˆã€‚
- **äº¤äº’è”åŠ¨**: èµ‹äºˆ `SignalLogPanel` è¶…é“¾æ¥è·³è½¬èƒ½åŠ›ï¼Œç‚¹å‡»æ—¥å¿—ä»£ç å¯åŒæ­¥è”åŠ¨ K çº¿ã€ä¸»åˆ—è¡¨ã€çƒ­ç‚¹è‡ªé€‰é¢æ¿ã€‚
- **æ•°æ®æ²»ç†**: ä¿¡å·æ—¥å¿—é¢æ¿å¼•å…¥â€œåŸºäºè‚¡ç¥¨çš„ä»£ç å»é‡â€ä¸â€œåŸºç¡€æ ¼å¼æ ¡éªŒâ€ï¼Œé˜²æ­¢é«˜é¢‘é‡å¤ä¿¡å·åˆ·å±ï¼Œç¡®ä¿æ•°æ®æµç¨³å®šæ€§ã€‚
- **å¤‡é€‰æ–¹æ¡ˆ**: ä¸º Alt+H/L æä¾› Ctrl+Alt+H/L å¤‡é€‰ï¼Œæœ€å¤§ç¨‹åº¦é¿å…ç¬¬ä¸‰æ–¹è½¯ä»¶å†²çªã€‚
- **å®æ—¶æ—¥å¿—æµ**: æ–°å¢ `SignalLogPanel` ä¸ºåç»­ P0.5 ä»“ä½å¼•æ“æä¾›å¯è§†åŒ–è°ƒè¯•çª—å£ã€‚
- **å¹¶è¡Œå¼€å‘çº¿**: å¼ºåŒ– `gemini.md` ä½œä¸ºä»»åŠ¡æ±‡åˆç‚¹ï¼Œæ‰€æœ‰æ²Ÿé€šæ–‡æ¡£ã€è®¡åˆ’ã€Task å®æ—¶åŒæ­¥ã€‚

## âœ… ä¸Šä¸€ä¸ªä»»åŠ¡: P0 æ”¶å°¾ - é›†æˆå½¢æ€æ£€æµ‹ (å·²å®Œæˆ 01-21 01:08)

**å˜æ›´æ–‡ä»¶**: `stock_live_strategy.py`

| åºå· | å˜æ›´ç‚¹ | çŠ¶æ€ |
|------|--------|------|
| 1 | æ·»åŠ å¯¼å…¥ `IntradayPatternDetector` | âœ… |
| 2 | åˆå§‹åŒ–æ£€æµ‹å™¨ (2åˆ†é’Ÿå†·å´) | âœ… |
| 3 | æ–°å¢å›è°ƒæ–¹æ³• `_on_pattern_detected` | âœ… |
| 4 | å¾ªç¯å†…è°ƒç”¨ `detector.update()` | âœ… |

---

## ğŸ¯ æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹å‘

**1. æ·»åŠ å¯¼å…¥**
```python
from intraday_pattern_detector import IntradayPatternDetector, PatternEvent
```

**2. åˆå§‹åŒ–æ£€æµ‹å™¨**
```python
# --- â­ æ—¥å†…å½¢æ€æ£€æµ‹å™¨ ---
self.pattern_detector = IntradayPatternDetector(cooldown=120, publish_to_bus=True)
self.pattern_detector.on_pattern = self._on_pattern_detected
```

**3. å›è°ƒæ–¹æ³•**
```python
def _on_pattern_detected(self, event: PatternEvent) -> None:
    """å½¢æ€æ£€æµ‹å›è°ƒ - è§¦å‘è¯­éŸ³æ’­æŠ¥"""
    pattern_cn = IntradayPatternDetector.PATTERN_NAMES.get(event.pattern, event.pattern)
    msg = f"{event.name} {pattern_cn}"
    action = "é£é™©" if event.pattern in ('high_drop', 'top_signal') else "å½¢æ€"
    logger.info(f"ğŸ”” å½¢æ€ä¿¡å·: {event.code} {event.name} - {pattern_cn}")
    self._trigger_alert(event.code, event.name, msg, action=action, price=event.price)
```

**4. ç­–ç•¥å¾ªç¯å†…è°ƒç”¨**
```python
# æ—¥å†…å½¢æ€æ£€æµ‹
if hasattr(self, 'pattern_detector'):
    try:
        prev_close = float(row.get('lastp1d', 0))
        self.pattern_detector.update(code, data.get('name', ''), None, row, prev_close)
    except Exception as e:
        logger.debug(f"Pattern detect error for {code}: {e}")
```

---

## ğŸ¯ æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹å‘

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹å‘ |
|------|------|----------|
| éœ‡è¡é¢‘ç¹äº¤æ˜“ | ä¿¡å·å³ä¹°å…¥ï¼Œæ— è¶‹åŠ¿ç¡®è®¤ | é˜¶æ®µæ€§ä»“ä½çŠ¶æ€æœº |
| æœªæ•æ‰ä¸»å‡æµª | ä»“ä½ä¸€æ¬¡æ€§å»ºä»“/æ¸…ä»“ | è“„åŠ¿â†’å¯åŠ¨â†’ä¸»å‡åˆ†é˜¶æ®µåŠ ä»“ |
| é«˜ä½æœªåŠæ—¶ç¦»åœº | æ— é¡¶éƒ¨å½¢æ€æ£€æµ‹ | é¡¶éƒ¨è¯†åˆ«è¯„åˆ†æœºåˆ¶ |

---

## ğŸ“‹ è¿­ä»£ä»»åŠ¡æ¸…å•

### P0: ä¿¡å·æ€»çº¿ + å½¢æ€æ£€æµ‹ â³ è¿›è¡Œä¸­

- [x] `signal_bus.py` - ç»Ÿä¸€ä¿¡å·æ€»çº¿ âœ… 01-21
- [x] `intraday_pattern_detector.py` - æ—¥å†…å½¢æ€æ£€æµ‹å™¨ âœ… 01-21
- [x] `hotlist_panel.py` - è¯­éŸ³é€šçŸ¥ä¿¡å· âœ… 01-21
- [x] `stock_live_strategy.py` - é›†æˆå½¢æ€æ£€æµ‹ âœ… 01-21
- [x] `trade_visualizer_qt6.py` - å…¨å±€çƒ­é”® + ä¿¡å·æ—¥å¿—é›† âœ… 01-21

### P0.5: æœ€åä¸€å…¬é‡Œæ‰§è¡Œ ğŸ”¥ æ ¸å¿ƒ

**é˜¶æ®µæ€§ä»“ä½çŠ¶æ€æœº (PositionPhaseEngine)**:
- **SCOUT (è¯•æ¢ 10%)**: å‡ºç°é€‰è‚¡ä¿¡å·ï¼Œä½†æ— é‡èƒ½æˆ–å½¢æ€ç¡®è®¤ã€‚
- **ACCUMULATE (è“„åŠ¿ 30%)**: å½¢æ€ç¡®è®¤ï¼ˆå¦‚çªç ´å¹³å°ï¼‰ï¼Œé‡èƒ½å †ç§¯ã€‚
- **LAUNCH (å¯åŠ¨ 50%)**: åˆ†æ—¶æ”¾é‡çªç ´ï¼Œå½¢æ€åŠ é€Ÿã€‚
- **SURGE (ä¸»å‡ 70-90%)**: è„±ç¦»æˆæœ¬åŒºï¼Œè¿›å…¥ä¸»å‡æµªã€‚
- **TOP_WATCH (é¡¶éƒ¨é¢„è­¦ 50%)**: å‡ºç°é«˜ä½æ”¾é‡æ»æ¶¨æˆ–å†²é«˜å›è½ä¿¡å·ã€‚
- **EXIT (ç¦»åœº 0%)**: è·Œç ´æ”¯æ’‘æˆ–é¡¶éƒ¨ç¡®ç«‹ã€‚

**å¾…åŠäº‹é¡¹**:
- [ ] `position_phase_engine.py` - å®ç°çŠ¶æ€è½¬ç§»é€»è¾‘ä¸è¯„åˆ†æœºåˆ¶
- [ ] é¡¶éƒ¨è¯†åˆ«è¯„åˆ† - ç»“åˆ `IntradayPatternDetector` çš„ `high_drop` ä¿¡å·
- [ ] éœ‡è¡è¿‡æ»¤è§„åˆ™ - å¢åŠ æ³¢åŠ¨ç‡ä¸å‡çº¿ç²˜åˆåº¦åˆ¤æ–­
- [ ] é›†æˆåˆ° `stock_live_strategy.py` - æ›¿æ¢ç®€å•çš„ `is_buy` é€»è¾‘
- [ ] `hotlist_panel.py` - åœ¨åˆ—è¡¨ä¸­ç›´è§‚æ˜¾ç¤ºå½“å‰è‚¡ç¥¨æ‰€å¤„çš„â€œé˜¶æ®µâ€ (è¿›åº¦æ¡æˆ–æ ‡ç­¾)

### P1: ç­–ç•¥æ•´åˆ

- [ ] `daily_pattern_detector.py` - æ—¥Kå½¢æ€ç»Ÿä¸€å…¥å£
- [ ] é‡æ„ `_check_strategies` å½¢æ€é€»è¾‘
- [ ] ç«ä»·é˜¶æ®µç‰¹æ®Šå¤„ç†
- [ ] è¿ç»­å¤§é˜³æ£€æµ‹

### P2: æ•°æ®æµä¼˜åŒ–

- [ ] çƒ­ç‚¹åˆ—è¡¨æ‰¹é‡tickè¯·æ±‚
- [ ] å½¢æ€è§¦å‘UIé—ªçƒ
- [ ] å½¢æ€å†å²æŸ¥çœ‹

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ•°æ®å±‚                                â”‚
â”‚  tdx_data_Day.py â†’ realtime_data_service.py â†’ df_all     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ£€æµ‹å±‚                                â”‚
â”‚  IntradayPatternDetector + DailyPatternDetector          â”‚
â”‚  â””â”€â”€ SignalBus(ç»Ÿä¸€äº‹ä»¶åˆ†å‘)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ‰§è¡Œå±‚ (P0.5æ ¸å¿ƒ)                     â”‚
â”‚  PositionPhaseEngine: SCOUTâ†’ACCUMULATEâ†’LAUNCHâ†’SURGEâ†’EXIT â”‚
â”‚  â””â”€â”€ é˜¶æ®µæ€§ä»“ä½: 0%â†’20%â†’50%â†’70%â†’50%â†’0%                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     è¾“å‡ºå±‚                                â”‚
â”‚  VoiceAnnouncer + HotlistPanel + TradingLogger           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å·²å®Œæˆæ¨¡å—

| æ¨¡å— | æ–‡ä»¶ | çŠ¶æ€ |
|------|------|------|
| çƒ­ç‚¹é¢æ¿ | `hotlist_panel.py` | âœ… |
| çƒ­ç‚¹è¯¦æƒ… | `hotspot_popup.py` | âœ… |
| ç­–ç•¥æ¡†æ¶ | `strategy_interface.py` | âœ… |
| ç­–ç•¥æ§åˆ¶ | `strategy_controller.py` | âœ… |
| ä¿¡å·ç³»ç»Ÿ | `signal_types.py`, `signal_message_queue.py` | âœ… |
| é£é™©å¼•æ“ | `risk_engine.py`, `sector_risk_monitor.py` | âœ… |
| è¯­éŸ³æ’­æŠ¥ | `VoiceAnnouncer`, `VoiceProcess` | âœ… |
| æŒä¹…åŒ– | `trading_logger.py` | âœ… |
| **æ—¥å†…å½¢æ€æ£€æµ‹** | `intraday_pattern_detector.py` | âœ… |
| **ä¿¡å·æ€»çº¿** | `signal_bus.py` | âœ… |
| **ä¿¡å·æ—¥å¿—é¢æ¿** | `signal_log_panel.py` | âœ… |

---

## ğŸ“… å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å†…å®¹ | å½±å“ |
|------|------|------|
| 01-21 11:27 | åˆå¹¶ç›‘æ§å¾ªç¯ï¼šåˆ é™¤ç‹¬ç«‹30så®šæ—¶å™¨ | `trade_visualizer_qt6.py` |
| 01-21 11:10 | åŒè‚¡å»é‡ï¼šå¼¹çª—å¤ç”¨ + æ¶ˆæ¯æ›´æ–° | `instock_MonitorTK.py` |
| 01-21 01:26 | å‡çº§å…¨å±€çƒ­é”®æ¨¡å¼ï¼Œé›†æˆä¿¡å·æ—¥å¿—é¢æ¿ | `trade_visualizer_qt6.py` |
| 01-21 01:20 | é‡æ„çƒ­ç‚¹ç›‘æ§ï¼Œæ”¯æŒå½¢æ€æ—¥å¿—æµ | `signal_log_panel.py` |
| 01-21 01:05 | é‡æ„è·Ÿè¸ªæœºåˆ¶ï¼Œå¢åŠ å½“å‰ä»»åŠ¡è¯¦æƒ…åŒºå— | `gemini.md` |
| 01-21 00:55 | æ‰¹å‡† P0 æ”¶å°¾å®æ–½è®¡åˆ’ | `stock_live_strategy.py` |
| 01-21 00:36 | æ•´åˆè§„åˆ’æ–‡æ¡£ï¼Œå»ºç«‹é•¿æœŸè¿­ä»£è·Ÿè¸ª | `gemini.md` |
| 01-21 00:30 | è§„åˆ’æœ€åä¸€å…¬é‡Œæ‰§è¡Œé—®é¢˜è§£å†³æ–¹æ¡ˆ | æ–°å¢ `PositionPhaseEngine` è®¾è®¡ |
| 01-20 18:38 | å®Œæˆ HotSpotPopup è¯¦æƒ…å¼¹çª— | `hotspot_popup.py` |
| 01-20 18:31 | å®Œæˆ HotlistPanel çƒ­ç‚¹é¢æ¿ | `hotlist_panel.py` |
| 01-20 18:24 | åˆ›å»ºæ¶æ„è§„åˆ’ï¼Œç¡®è®¤è®¾è®¡å†³ç­– | - |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- ä¿¡å·æ€»çº¿: `signal_bus.py`
- å½¢æ€æ£€æµ‹: `intraday_pattern_detector.py`
- æ•°æ®åº“: `signal_strategy.db` (follow_recordè¡¨)
